<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>RAZAFI Admin — Pools</title>
  <link rel="stylesheet" href="/admin/admin.css" />
</head>
<body>
  <div class="login-container" style="align-items:flex-start;">
    <div class="card" style="width:100%; max-width:1100px; margin:24px auto;">
      <div class="topbar">
        <div class="title">
          <h1>Pools</h1>
          <div class="subtitle">
            Connected as <span id="me">…</span><br/>
            Manage pools (Starlink) + capacity + AP assignment
          </div>
        </div>

        <!-- legacy nav kept hidden to avoid breaking pools.js -->
        <div class="nav" style="display:none;">
          <a href="/admin/"><button type="button">Dashboard</button></a>
          <a href="/admin/clients.html"><button type="button">Clients</button></a>
          <a href="/admin/aps.html"><button type="button">APs</button></a>
          <a href="/admin/plans.html"><button type="button">Plans</button></a>
          <a href="/admin/revenue.html"><button type="button">Revenue</button></a>
          <button id="logoutBtn" type="button">Logout</button>
        </div>
      </div>

      <div id="msg" class="error" style="display:none;"></div>

      <!-- Create pool -->
      <div class="card" style="padding:16px; margin-top:14px;">
        <div style="display:flex; justify-content:space-between; gap:12px; flex-wrap:wrap; align-items:flex-end;">
          <div>
            <div style="font-weight:800; font-size:18px; color:#0d6efd;">Create pool</div>
            <div class="subtitle" style="text-align:left; margin:6px 0 0;">Capacity = max concurrent clients for this Starlink</div>
          </div>
          <div class="form-row" style="flex:1 1 520px; justify-content:flex-end;">
            <select id="newSystem" style="max-width:160px; margin-bottom:0;">
              <option value="portal">Portal</option>
              <option value="mikrotik">Mikrotik</option>
            </select>
            <input id="newMikrotikIp" placeholder="MikroTik IP (ex: 192.168.88.1)" style="max-width:260px; margin-bottom:0; display:none;" />
            <input id="newRadiusNasId" placeholder="NAS ID (ex: razafi-pool-1)" style="max-width:240px; margin-bottom:0; display:none;" />

            <input id="newName" placeholder="Pool name" style="max-width:320px; margin-bottom:0;" />
            <input id="newCap" type="number" min="0" placeholder="capacity_max" style="max-width:220px; margin-bottom:0;" />
            <button type="button" id="createPoolBtn" style="width:auto;">Create</button>
          </div>
        </div>
      </div>

      <!-- Filters -->
      <div class="sticky-bar">
        <div class="filters">
          <button type="button" id="sysPortalBtn" class="filter-btn primary" style="width:auto;">Portal</button>
          <button type="button" id="sysMikrotikBtn" class="filter-btn" style="width:auto;">Mikrotik</button>
          <input id="q" class="filter-search" placeholder="Search pool name / id..." />
          <button type="button" id="refresh" class="filter-btn primary" style="width:auto;">Refresh</button>
        </div>
      </div>

      <!-- Table -->
      <div class="table-wrap">
        <table style="width:100%; border-collapse:collapse;">
          <thead>
            <tr style="text-align:left; border-bottom:1px solid rgba(0,0,0,0.08);">
              <th style="padding:10px;">Pool</th>
              <th style="padding:10px;">Capacity</th>
              <th style="padding:10px;">Live clients</th>
              <th style="padding:10px;">Pool %</th>
              <th style="padding:10px;">Actions</th>
            </tr>
          </thead>
          <tbody id="rows"></tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- NEW shared drawer -->
  <script src="/admin/nav.js"></script>
  <script src="/admin/pools.js"></script>
</body>
</html>
