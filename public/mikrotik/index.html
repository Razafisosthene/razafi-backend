<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>WiFi RAZAFI</title>

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#ffffff" />

  <link rel="icon" href="assets/img/favicon.ico" />
  <link rel="icon" type="image/svg+xml" href="assets/img/favicon.svg" />
  <link rel="apple-touch-icon" href="assets/img/apple-touch-icon.png" />

  <link rel="stylesheet" href="assets/css/style.css" />
  <style>
    /* RAZAFI Portal â€“ Status badges (premium) */
    .status-badge{
      display:inline-flex;align-items:center;gap:6px;
      padding:6px 14px;border-radius:999px;
      font-weight:600;font-size:13px;letter-spacing:.4px;
      border:1px solid transparent;
      user-select:none; -webkit-user-select:none;
      white-space:nowrap;
    }
    .status-badge.hidden{display:none!important;}
    .status-badge.mini{padding:4px 10px;font-size:12px;margin-left:10px;vertical-align:middle;}
    .badge-pending{background:#FFF4CC;border-color:#FFD76A;color:#9A6B00;}
    .badge-active{background:#DFF7E8;border-color:#53C48A;color:#0F6A3E;}
    .badge-used{background:#FDE2E2;border-color:#E45A5A;color:#8A1F1F;}
    .badge-expired{background:#EAEAF0;border-color:#A5A7B5;color:#4A4D5A;}

    body.theme-dark .badge-pending{background:rgba(255,199,0,.15);border-color:rgba(255,199,0,.35);color:#FFD76A;}
    body.theme-dark .badge-active{background:rgba(83,196,138,.15);border-color:rgba(83,196,138,.35);color:#53C48A;}
    body.theme-dark .badge-used{background:rgba(228,90,90,.18);border-color:rgba(228,90,90,.35);color:#FF7A7A;}
    body.theme-dark .badge-expired{background:rgba(165,167,181,.15);border-color:rgba(165,167,181,.35);color:#C5C7D4;}

    @keyframes pendingPulse {
      0%   { box-shadow: 0 0 0 rgba(255,199,0,0.00); filter: brightness(1); }
      50%  { box-shadow: 0 0 6px rgba(255,199,0,0.45); filter: brightness(1.03); }
      100% { box-shadow: 0 0 0 rgba(255,199,0,0.00); filter: brightness(1); }
    }
    .badge-pending.pulse{animation: pendingPulse 2.8s ease-in-out infinite;}
  </style>
</head>

<body class="theme-light">

  <!-- ================= HEADER ================= -->
  <header class="portal-header">
    <div class="brand">
      <img src="assets/img/RAZAFI.png" alt="RAZAFI" style="height:40px;">
    </div>

    <button id="themeToggle" class="theme-toggle" aria-label="Changer de thÃ¨me">
      ğŸŒ™
    </button>
  </header>

  <!-- ================= MAIN ================= -->
  <main class="portal-container">

    <!-- ========= STATUS ========= -->
    <section class="card status-card">

      <h2>Bienvenue sur WiFi RAZAFI</h2>

      <!-- ğŸ”¹ Option C: pool/site name (filled by mikrotik.js using nas_id) -->
      <p id="poolName" class="muted small"></p>

      <div id="statusBadgeMain" class="status-badge hidden"></div>

      <p id="accessMsg" class="muted">VÃ©rification de votre accÃ¨s en coursâ€¦</p>

      <!-- ğŸ”¹ Pool full banner (optional, controlled by backend) -->
      <div
        id="poolFullBanner"
        style="display:none; margin:10px 0; padding:10px 12px;
               border-radius:10px;
               border:1px solid rgba(200,120,0,0.35);
               background:rgba(255,200,0,0.10);">
        <strong>âš ï¸ RÃ©seau momentanÃ©ment saturÃ©.</strong><br>
        Les achats sont temporairement indisponibles.
      </div>

      <!-- NO ACTIVE VOUCHER -->
      <div id="voucherNone">
        <p id="noVoucherMsg" class="muted">Vous nâ€™avez pas de code actif.</p>
        <p class="muted small">
          Choisissez un plan ci-dessous pour acheter un code.
        </p>
      </div>

      <!-- ACTIVE VOUCHER -->
      <div id="voucherHas" class="hidden">
        <p id="hasVoucherMsg" class="success">âœ… VÃ©rificationâ€¦</p>

                <ul class="voucher-info">
          <li>ğŸ”‘ <strong id="voucher-code">â€”</strong> <span id="statusBadgeMini" class="status-badge mini hidden"></span></li>

          <li>ğŸ“¦ Plan : <strong id="plan-name">â€”</strong></li>
          <li>â³ DurÃ©e : <strong id="plan-duration">â€”</strong></li>
          <li>ğŸ“Š Data totale : <strong id="plan-data-total">â€”</strong></li>
          <li>ğŸ”Œ Appareils autorisÃ©s : <strong id="plan-max-devices">â€”</strong></li>

          <li id="row-time-left">â³ Temps restant : <strong id="time-left">â€”</strong></li>
          <li id="row-expires-at" class="hidden">ğŸ“† Expire le : <strong id="expires-at">â€”</strong></li>

          <li id="row-data-left">ğŸ“Š DonnÃ©es restantes : <strong id="data-left">â€”</strong></li>
          <li id="row-data-used" class="hidden">ğŸ“‰ DonnÃ©es utilisÃ©es : <strong id="data-used">â€”</strong></li>

          <li>ğŸ”Œ Appareils utilisÃ©s : <strong id="devices-used">â€”</strong></li>
        </ul>

        <button id="useVoucherBtn" class="primary-btn" disabled>
          Utiliser ce code
        </button>

        <button id="copyVoucherBtn" class="secondary-btn" disabled>
          Copier le code
        </button>
      </div>

    </section>

    <!-- ========= PLANS ========= -->
    <section>
      <h3>Plans</h3>
      <div id="plansGrid" class="plans-grid">
        <p class="muted small">Chargement des plansâ€¦</p>
      </div>
    </section>

    <!-- ========= ASSISTANCE ========= -->
    <section class="card faq">
      <h3>ğŸ›Ÿ Assistance</h3>

      <p>
        <strong>ğŸ”Œ Comment se connecter ?</strong><br>
        SÃ©lectionnez un plan et effectuez le paiement via MVola.
      </p>

      <p>
        <strong>ğŸ“ Besoin dâ€™aide ?</strong><br>
        Service client : <strong id="supportPhone">038 75 005 92</strong>
      </p>
    </section>

  </main>

  <!-- ================= FOOTER ================= -->
  <footer class="portal-footer">
    <p class="muted small">
      Â© RAZAFI â€” Portail sÃ©curisÃ©
    </p>
  </footer>

  <!-- ================= JS ================= -->
  <!-- ğŸ”‘ Identity (nas_id / ap_mac) is handled ONLY in mikrotik.js -->
  <script src="assets/js/mikrotik.js" defer></script>

</body>
</html>
